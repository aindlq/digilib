<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2019-08-06
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190806" />
    <meta http-equiv="Content-Language" content="en" />
    <title>digilib - The Digital Image Library &#x2013; Building digilib with Maven</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://robcast.github.io/digilib/" id="bannerLeft">
                <h2>digilib - a versatile image viewing environment for the internet</h2>
                </a>
                      </div>
        <div class="pull-right">                  <a href="https://robcast.github.io/digilib/" id="bannerRight">
                                                                                                <img src="images/digilib-logo-small.png" />
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2019-08-06</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 2.8-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="index.html" title="About digilib">
          <i class="none"></i>
        About digilib</a>
            </li>
                  
      <li>
    
                          <a href="features.html" title="digilib features">
          <i class="none"></i>
        digilib features</a>
            </li>
                  
      <li>
    
                          <a href="digilib-short.html" title="How digilib works">
          <i class="none"></i>
        How digilib works</a>
            </li>
                  
      <li>
    
                          <a href="history.html" title="Ancient history">
          <i class="none"></i>
        Ancient history</a>
            </li>
                              <li class="nav-header">Installation</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>Building digilib</a>
          </li>
                  
      <li>
    
                          <a href="install-digilib.html" title="Installing digilib">
          <i class="none"></i>
        Installing digilib</a>
            </li>
                  
      <li>
    
                          <a href="server-setup.html" title="Server setup">
          <i class="none"></i>
        Server setup</a>
            </li>
                  
      <li>
    
                          <a href="digilib-docker.html" title="digilib in Docker">
          <i class="none"></i>
        digilib in Docker</a>
            </li>
                              <li class="nav-header">Configuration</li>
                                
      <li>
    
                          <a href="digilib-config.html" title="Configuring digilib">
          <i class="none"></i>
        Configuring digilib</a>
            </li>
                  
      <li>
    
                          <a href="image-directories.html" title="Directory layout">
          <i class="none"></i>
        Directory layout</a>
            </li>
                  
      <li>
    
                          <a href="java-settings.html" title="Java settings and tuning">
          <i class="none"></i>
        Java settings and tuning</a>
            </li>
                  
      <li>
    
                          <a href="auth.html" title="Access control">
          <i class="none"></i>
        Access control</a>
            </li>
                              <li class="nav-header">Development</li>
                                
      <li>
    
                          <a href="scaler-api.html" title="The digilib Scaler API">
          <i class="none"></i>
        The digilib Scaler API</a>
            </li>
                  
      <li>
    
                          <a href="iiif-api.html" title="The digilib IIIF API">
          <i class="none"></i>
        The digilib IIIF API</a>
            </li>
                  
      <li>
    
                          <a href="client-integration.html" title="Integrating digilib into your page">
          <i class="none"></i>
        Integrating digilib into your page</a>
            </li>
                  
      <li>
    
                          <a href="plugins.html" title="Digilib plugins">
          <i class="none"></i>
        Digilib plugins</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                          
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org/" title="Built by Maven" class="builtBy">
        <img class="builtBy"  alt="Built by Maven" src="https://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                                                                                                    <a href="../../" title="Hosted by GitHub" class="builtBy">
        <img class="builtBy"  alt="Hosted by GitHub" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Logo.png"   width="100px"  />
      </a>
                                                                                                    <a href="http://www.sourceforge.net/" title="Previously hosted by SourceForge" class="builtBy">
        <img class="builtBy"  alt="Previously hosted by SourceForge" src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Sourceforge_logo.png"   width="100px"  />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Building digilib with Maven</h1>
<p>The best way to get the latest and greatest digilib is using the <a class="externalLink" href="https://git-scm.com/">git</a> version control and the <a class="externalLink" href="http://maven.apache.org/">Maven</a> build tool. Git will download the digilib code and Maven will compile, and install the latest digilib version and all required libraries.</p>
<div class="section">
<h2><a name="What_you_need"></a>What you need</h2>

<ul>
  
<li><a class="externalLink" href="https://git-scm.com/">git</a></li>
  
<li><a class="externalLink" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java JDK</a> (7 or higher)</li>
  
<li><a class="externalLink" href="http://maven.apache.org/">Maven</a></li>
</ul></div>
<div class="section">
<h2><a name="Quick_developer_build_and_run"></a>Quick developer build and run</h2>

<ol style="list-style-type: decimal">
  
<li>
<p>Clone the digilib repository into a directory <tt>digilib</tt></p>
  
<div class="source">
<div class="source">
<pre>git clone https://github.com/robcast/digilib.git
</pre></div></div></li>
  
<li>
<p>Change to the directory</p>
  
<div class="source">
<div class="source">
<pre>cd digilib
</pre></div></div></li>
  
<li>
<p>build and run the webapp in the embedded Jetty runtime for development</p>
  
<div class="source">
<div class="source">
<pre>mvn jetty:run-exploded --projects webapp
</pre></div></div></li>
</ol>
<p>and watch your digilib at <a class="externalLink" href="http://localhost:8080/digilib.html">http://localhost:8080/digilib.html</a></p></div>
<div class="section">
<h2><a name="Developer_build"></a>Developer build</h2>
<p>If you are developing with digilib it is helpful to check out the source code separately so you can keep it around, modify it or change the configuration before you deploy.</p>
<p>To check out the latest source code into the directory <tt>digilib</tt> run</p>

<div class="source">
<div class="source">
<pre>git clone https://github.com/robcast/digilib.git
</pre></div></div>
<p>and change into the repository directory</p>

<div class="source">
<div class="source">
<pre>cd digilib
</pre></div></div>
<p>If you want to update your copy of digilib to the latest version at some time in the future just run</p>

<div class="source">
<div class="source">
<pre>git pull
</pre></div></div>
<p>The digilib configuration files are in the sub-directory <tt>webapp/src/main/webapp/WEB-INF/</tt> (see below).</p>
<p>To build the resulting source code run</p>

<div class="source">
<div class="source">
<pre>mvn package
</pre></div></div>
<p>This will create a web application directory <tt>digilib-webapp-2.5-SNAPSHOT</tt> and a WAR file <tt>digilib-webapp-2.5-SNAPSHOT-srv3.war</tt> (or similar) in the subdirectory <tt>webapp/target/</tt> .</p></div>
<div class="section">
<h2><a name="Deploying_the_web_application_by_hand"></a>Deploying the web application by hand</h2>
<p>To deploy digilib just copy the web application directory or the WAR file into the <tt>webapp</tt> directory of the Servlet container.</p>
<p>Since the URL of your digilib server starts with the name of the web application and the name of the web application is derived from the name of the web application directory or the WAR file <b>please rename the web application directory or WAR file to <tt>digilib</tt> before you start</b></p>
<p>Then you should see digilib running at the URL <a class="externalLink" href="http://localhost:8080/digilib/digilib.html">http://localhost:8080/digilib/digilib.html</a></p>
<p>If you use the unmodified default configuration you should see the digilib logo and other sample images from the <tt>sample-images</tt> directory of the web application.</p>
<p>For more detailed documentation see the <a href="install-digilib.html">deployment instructions</a>.</p></div>
<div class="section">
<h2><a name="Configuring_digilib"></a>Configuring digilib</h2>
<p>To change the configuration of digilib just create and edit the file <tt>digilib-config.xml</tt> in the web application WEB-INF directory (<tt>webapp/src/main/webapp/WEB-INF/digilib-config.xml</tt>). You can copy and rename the sample file <tt>digilib-config.xml.template</tt> to get some default options to start with. Please check the <a href="digilib-config.html">documentation of the configuration options</a>.</p>
<p>You can see a summary of your running digilib configuration at the URL <a class="externalLink" href="http://localhost:8080/digilib/server/dlConfig.jsp">http://localhost:8080/digilib/server/dlConfig.jsp</a></p></div>
<div class="section">
<h2><a name="Additional_Maven_build_options"></a>Additional Maven build options</h2>
<p>Some build options have to be activated as Maven profiles with the <tt>-P</tt> command line option when building digilib. For example, to build digilib with the Manifester servlet (&#x201c;iiif-presentation&#x201d;) use:</p>

<div class="source">
<div class="source">
<pre>mvn -Piiif-presentation package
</pre></div></div>
<p>You can add multiple profiles at the same time if necessary.</p>
<div class="section">
<h3><a name="servlet2"></a>servlet2</h3>
<p>Digilib uses the Asynchronous Servlet API (3.0) by default. You will need Java version 6 or later and Tomcat version 7 or Jetty version 8 or later to use it.</p>
<p><tt>-Pservlet2</tt> builds a servlet with the the old non-Asynchronous Servlet API (2.3).</p>
<p>This creates a WAR file with the postfix &#x201c;-srv2&#x201d;. The build process uses the file <tt>webapp/src/main/webapp/WEB-INF/web-2.4.xml</tt> as <tt>web.xml</tt> file.</p></div>
<div class="section">
<h3><a name="servlet3"></a>servlet3</h3>
<p><tt>-Pservlet3</tt> builds digillib with the Asynchronous Servlet API (3.0). This is the default profile, it will be used if you do not specify any profile.</p>
<p>This creates a WAR file with the postfix &#x201c;-srv3&#x201d;. The build process uses the file <tt>webapp/src/main/webapp/WEB-INF/web-3.0.xml</tt> as <tt>web.xml</tt> file. </p></div>
<div class="section">
<h3><a name="iiif-presentation"></a>iiif-presentation</h3>
<p><tt>-Piiif-presentation</tt> builds digilib with the &#x201c;Manifester&#x201d; servlet for IIIF Presentation API support (see <a href="iiif-api.html">digilib IIIF support documentation</a>). </p>
<p>This creates a WAR file with the postfix &#x201c;-srv3p&#x201d;. The build process uses the file <tt>webapp/src/main/webapp/WEB-INF/web-iiif-pres.xml</tt> as <tt>web.xml</tt> file.</p></div>
<div class="section">
<h3><a name="text"></a>text</h3>
<p><tt>-Ptext</tt> builds digilib with the &#x201c;Texter&#x201d; servlet to download plain text or XML files (see <a class="externalLink" href="https://github.com/robcast/digilib/tree/master/text">the source</a>). You have to add <tt>-Pservlet3</tt> or <tt>-Pservlet2</tt> as well.</p>
<p>You also have to copy the mapping for the &#x201c;Texter&#x201d; servlet from <tt>web-additional.xml</tt> into the <tt>web.xml</tt> file used by the selected servlet API like <tt>web-3.0.xml</tt>.</p></div>
<div class="section">
<h3><a name="pdf"></a>pdf</h3>
<p><tt>-Ppdf</tt> builds digilib with the &#x201c;PDFCache&#x201d; servlet to generate and download PDF files from images. (see <a class="externalLink" href="https://github.com/robcast/digilib/tree/master/pdf">the source</a>).</p>
<p>You also have to copy the mapping for the &#x201c;PDFCache&#x201d; servlet from <tt>web-additional.xml</tt> into the <tt>web.xml</tt> file used by the selected servlet API like <tt>web-3.0.xml</tt>.</p></div></div>
<div class="section">
<h2><a name="create-sprites"></a>create-sprites</h2>
<p><tt>-Pcreate-sprites</tt> re-creates the image sprite file (<tt>webapp/src/main/webapp/jquery/img/dl-buttons-full-32-sprite.png</tt>) from the separate icon image files. This option only needs to be used if you are a developer and you want to change the icon images.</p></div>
<div class="section">
<h2><a name="running_tests"></a>running tests</h2>
<p><tt>-DskipTests=false</tt> enables some functional tests. The tests are run as part of the normal build process. You can also run just the tests with <tt>mvn -DskipTests=false test</tt>.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2001-2019
                        <a href="https://robcast.github.io/digilib/">digilib Community</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
