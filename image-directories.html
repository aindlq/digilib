<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2019-08-06
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190806" />
    <meta http-equiv="Content-Language" content="en" />
    <title>digilib - The Digital Image Library &#x2013; Directory layout for images</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://robcast.github.io/digilib/" id="bannerLeft">
                <h2>digilib - a versatile image viewing environment for the internet</h2>
                </a>
                      </div>
        <div class="pull-right">                  <a href="https://robcast.github.io/digilib/" id="bannerRight">
                                                                                                <img src="images/digilib-logo-small.png" />
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2019-08-06</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 2.8-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="index.html" title="About digilib">
          <i class="none"></i>
        About digilib</a>
            </li>
                  
      <li>
    
                          <a href="features.html" title="digilib features">
          <i class="none"></i>
        digilib features</a>
            </li>
                  
      <li>
    
                          <a href="digilib-short.html" title="How digilib works">
          <i class="none"></i>
        How digilib works</a>
            </li>
                  
      <li>
    
                          <a href="history.html" title="Ancient history">
          <i class="none"></i>
        Ancient history</a>
            </li>
                              <li class="nav-header">Installation</li>
                                
      <li>
    
                          <a href="build-maven.html" title="Building digilib">
          <i class="none"></i>
        Building digilib</a>
            </li>
                  
      <li>
    
                          <a href="install-digilib.html" title="Installing digilib">
          <i class="none"></i>
        Installing digilib</a>
            </li>
                  
      <li>
    
                          <a href="server-setup.html" title="Server setup">
          <i class="none"></i>
        Server setup</a>
            </li>
                  
      <li>
    
                          <a href="digilib-docker.html" title="digilib in Docker">
          <i class="none"></i>
        digilib in Docker</a>
            </li>
                              <li class="nav-header">Configuration</li>
                                
      <li>
    
                          <a href="digilib-config.html" title="Configuring digilib">
          <i class="none"></i>
        Configuring digilib</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Directory layout</a>
          </li>
                  
      <li>
    
                          <a href="java-settings.html" title="Java settings and tuning">
          <i class="none"></i>
        Java settings and tuning</a>
            </li>
                  
      <li>
    
                          <a href="auth.html" title="Access control">
          <i class="none"></i>
        Access control</a>
            </li>
                              <li class="nav-header">Development</li>
                                
      <li>
    
                          <a href="scaler-api.html" title="The digilib Scaler API">
          <i class="none"></i>
        The digilib Scaler API</a>
            </li>
                  
      <li>
    
                          <a href="iiif-api.html" title="The digilib IIIF API">
          <i class="none"></i>
        The digilib IIIF API</a>
            </li>
                  
      <li>
    
                          <a href="client-integration.html" title="Integrating digilib into your page">
          <i class="none"></i>
        Integrating digilib into your page</a>
            </li>
                  
      <li>
    
                          <a href="plugins.html" title="Digilib plugins">
          <i class="none"></i>
        Digilib plugins</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                          
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org/" title="Built by Maven" class="builtBy">
        <img class="builtBy"  alt="Built by Maven" src="https://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                                                                                                    <a href="../../" title="Hosted by GitHub" class="builtBy">
        <img class="builtBy"  alt="Hosted by GitHub" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Logo.png"   width="100px"  />
      </a>
                                                                                                    <a href="http://www.sourceforge.net/" title="Previously hosted by SourceForge" class="builtBy">
        <img class="builtBy"  alt="Previously hosted by SourceForge" src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Sourceforge_logo.png"   width="100px"  />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Directory layout for images</h1>
<p>In digilib all images are identified by the <tt>fn</tt> and (optional) <tt>pn</tt> parameters. The value for <tt>fn</tt> can be a directory path or a directory path and a filename, separated by slashes, e.g. &#x201c;<tt>fn=books/book1/page0002</tt>&#x201d;.</p>
<p>If <tt>fn</tt> is a directory path without filename <tt>pn</tt> is the index number of the image files in this directory in alphabetical order, e.g. &#x201c;<tt>fn=books/book1&amp;pn=2</tt>&#x201d;. The default for <tt>pn</tt> is 1 i.e. the first image. </p>
<p>If <tt>fn</tt> ends in a filename <tt>pn</tt> is ignored. File extensions are also ignored, i.e. &#x201c;<tt>books/book1/page0002</tt>&#x201d; and &#x201c;<tt>books/book1/page0002.tif</tt>&#x201d; identify the same image. It is recommended to omit the file extension.</p>
<p>The directory path in <tt>fn</tt> is relative to the base directory in the <tt>basedir-list</tt> parameter of the <tt>digilib-config.xml</tt> file, e.g. if</p>

<div class="source">
<div class="source">
<pre>&lt;parameter name=&quot;basedir-list&quot; value=&quot;/docuserver/images&quot; /&gt;
</pre></div></div>
<p>and</p>

<div class="source">
<div class="source">
<pre>fn=books/book1/page0002
</pre></div></div>
<p>then digilib will try to load the file</p>

<div class="source">
<div class="source">
<pre>/docuserver/images/books/book1/page0002.tif
</pre></div></div>
<p>(automatically finding the right file extension)</p>
<div class="section">
<h2><a name="Prescaled_images"></a>Prescaled images</h2>
<p>You can provide any number of scaled-down versions of your images that digilib can use when a smaller version of an image is requested. Since less data has to be read and processed this can speed up digilib&#x2019;s performance considerably.</p>
<p>The actual process is that the client requests a certain target size, digilib scans all available scaled-down versions of the same image, selects the smallest image that is larger than the requested size and scales it down to the requested size.</p>
<p>There is another optimization in digilib: if the requested image is <i>exactly</i> the same size and type as the pre-scaled image then the pre-scaled image is sent unmodified to the client which is a lot faster. So it makes sense to produce thumbnails of exactly 90 pixel width when they are used in an HTML page where all images are 90 pixel wide.</p>
<p>The scaled-down versions of the image have to have the same file name as the original hi-res file. They can have a different type and extension (e.g. <tt>img002.jpg</tt> for <tt>img002.TIFF</tt>)</p>
<p>The scaled down images have to have the same directory path (the part that shows up in digilib&#x2019;s &#x201c;fn&#x201d; parameter) as the hi-res file wile the first part of each directory tree is configured by the <tt>basedir-list</tt> parameter in <tt>digilib-config.xml</tt>.</p>
<p>The sequence of directories in <tt>basedir-list</tt> is from high-res to low-res. Images must be present in the hires directory but they need not be present in all lower-res directories.</p>
<p>e.g. if digilib-config.xml contains</p>

<div class="source">
<div class="source">
<pre>&lt;parameter name=&quot;basedir-list&quot; value=&quot;/images:/scaled:/thumb&quot; /&gt;
</pre></div></div>
<p>and a user requests the image <tt>books/book1/page0002</tt> digilib looks for</p>

<ol style="list-style-type: decimal">
  
<li><tt>/thumb/books/book1/page0002.jpg</tt></li>
  
<li><tt>/scaled/books/book1/page002.jpg</tt></li>
  
<li><tt>/images/books/book1/page002.tif</tt></li>
</ol>
<p>(automatically finding the right file extension) and uses the first image that is bigger than or equal to the requested size.</p>
<p>For batch-prescaling our images we use a very old Perl script called &#x201c;scale-o-mat&#x201d; that uses a lot of freely available imaging libraries (ImageMagick, libtiff, netpbm) and is available in our <a class="externalLink" href="https://it-dev.mpiwg-berlin.mpg.de/cvs/cgi-bin/cvsweb/scaleomat/">public CVS</a>. The script is given a hi-res base directory, a destination base directory, a destination size and a starting directory. It then processes all files in the starting directory and all its subdirectories and creates scaled images in corresponding directories under the destination base directory.</p>
<p>We currently use prescaled thumbnails of 100 pixels and images for browser display of 1500 pixels. Remember that the prescaled image has to be larger (or the same size) than the requested image size!</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2001-2019
                        <a href="https://robcast.github.io/digilib/">digilib Community</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
